{"mappings":"gfAAA,IAAAA,EAAAC,EAAA,SAGAC,KAAKC,oBAAmB,SAAAC,GAClBA,EACFC,GAAGC,WAAW,UAAUC,YACtB,SAAAC,GACEC,YAAYD,EAASE,MACrBC,QAAQP,MAEV,SAAAQ,G,OAAOC,QAAQC,IAAIF,EAAIG,aAGzBJ,UACAF,YAAY,QAKhB,IAAMO,EAAaC,SAASC,cAAc,gBAC1CF,EAAWG,iBAAiB,UAAU,SAAAC,GACpCA,EAAEC,iBAGF,IAAMC,EAAQN,EAAW,gBAAgBO,MACnCC,EAAWR,EAAW,mBAAmBO,MAG/CrB,KACGuB,+BAA+BH,EAAOE,GACtCE,MAAK,SAAAC,GACJ,OAAOtB,GAAGC,WAAW,SAASsB,IAAID,EAAKvB,KAAKyB,KAAKC,IAAI,CACnDC,IAAKf,EAAW,cAAcO,WAGjCG,MAAK,WAEJ,IAAMM,EAAQf,SAASC,cAAc,iBACrCe,EAAEC,MAAMC,YAAYH,GAAOI,QAC3BpB,EAAWqB,QACXC,aAAaC,QAAQ,OAAQ,cAKpBtB,SAASC,cAAc,WAC/BC,iBAAiB,SAAS,SAAAC,GAC/BA,EAAEC,iBACFnB,KAAKsC,WACL,EAAAxC,EAAAyC,kBACAH,aAAaC,QAAQ,OAAQ,YAI/B,IAAMG,EAAYzB,SAASC,cAAc,eACzCwB,EAAUvB,iBAAiB,UAAU,SAAAC,GACnCA,EAAEC,iBAGF,IAAMC,EAAQoB,EAAU,eAAenB,MACjCC,EAAWkB,EAAU,kBAAkBnB,MAG7CrB,KAAKyC,2BAA2BrB,EAAOE,GAAUE,MAAK,SAAAC,GAEpD,IAAMK,EAAQf,SAASC,cAAc,gBACrCe,EAAEC,MAAMC,YAAYH,GAAOI,QAC3BM,EAAUL,QACVC,aAAaC,QAAQ,OAAQ,c","sources":["src/js/auth.js"],"sourcesContent":["import { onClickHomeBtn } from './home-library-btns';\r\n\r\n// listen for auth status changes\r\nauth.onAuthStateChanged(user => {\r\n  if (user) {\r\n    db.collection('guides').onSnapshot(\r\n      snapshot => {\r\n        setupGuides(snapshot.docs);\r\n        setupUI(user);\r\n      },\r\n      err => console.log(err.message)\r\n    );\r\n  } else {\r\n    setupUI();\r\n    setupGuides([]);\r\n  }\r\n});\r\n\r\n// signup\r\nconst signupForm = document.querySelector('#signup-form');\r\nsignupForm.addEventListener('submit', e => {\r\n  e.preventDefault();\r\n\r\n  // get user info\r\n  const email = signupForm['signup-email'].value;\r\n  const password = signupForm['signup-password'].value;\r\n\r\n  // sign up the user & add firestore data\r\n  auth\r\n    .createUserWithEmailAndPassword(email, password)\r\n    .then(cred => {\r\n      return db.collection('users').doc(cred.user.uid).set({\r\n        bio: signupForm['signup-bio'].value,\r\n      });\r\n    })\r\n    .then(() => {\r\n      // close the signup modal & reset form\r\n      const modal = document.querySelector('#modal-signup');\r\n      M.Modal.getInstance(modal).close();\r\n      signupForm.reset();\r\n      localStorage.setItem('auth', 'true');\r\n    });\r\n});\r\n\r\n// logout\r\nconst logout = document.querySelector('#logout');\r\nlogout.addEventListener('click', e => {\r\n  e.preventDefault();\r\n  auth.signOut();\r\n  onClickHomeBtn();\r\n  localStorage.setItem('auth', 'false');\r\n});\r\n\r\n// login\r\nconst loginForm = document.querySelector('#login-form');\r\nloginForm.addEventListener('submit', e => {\r\n  e.preventDefault();\r\n\r\n  // get user info\r\n  const email = loginForm['login-email'].value;\r\n  const password = loginForm['login-password'].value;\r\n\r\n  // log the user in\r\n  auth.signInWithEmailAndPassword(email, password).then(cred => {\r\n    // close the signup modal & reset form\r\n    const modal = document.querySelector('#modal-login');\r\n    M.Modal.getInstance(modal).close();\r\n    loginForm.reset();\r\n    localStorage.setItem('auth', 'true');\r\n  });\r\n});\r\n"],"names":["$3faXO","parcelRequire","auth","onAuthStateChanged","user","db","collection","onSnapshot","snapshot","setupGuides","docs","setupUI","err","console","log","message","$a8c8b369db0e2137$var$signupForm","document","querySelector","addEventListener","e","preventDefault","email","value","password","createUserWithEmailAndPassword","then","cred","doc","uid","set","bio","modal","M","Modal","getInstance","close","reset","localStorage","setItem","signOut","onClickHomeBtn","$a8c8b369db0e2137$var$loginForm","signInWithEmailAndPassword"],"version":3,"file":"index.168a3e68.js.map"}